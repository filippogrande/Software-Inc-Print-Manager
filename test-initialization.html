<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Inizializzazione</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <h1>Test Inizializzazione App</h1>
    
    <div class="test-section">
        <h2>Test Caricamento Classi</h2>
        <div id="classTest"></div>
    </div>
    
    <div class="test-section">
        <h2>Test Inizializzazione App</h2>
        <div id="appTest"></div>
    </div>
    
    <div class="test-section">
        <h2>Test Manager</h2>
        <div id="managerTest"></div>
    </div>
    
    <div class="test-section">
        <h2>Test Button Binding</h2>
        <button id="testButton">Test Button</button>
        <div id="buttonTest"></div>
    </div>

    <!-- Carica tutti i moduli JavaScript -->
    <script src="js/timeManager.js"></script>
    <script src="js/contractManager.js"></script>
    <script src="js/productionManager.js"></script>
    <script src="js/uiManager.js"></script>
    <script src="js/analysisManager.js"></script>
    <script src="js/dataManager.js"></script>
    <script src="js/settingsManager.js"></script>
    <script src="js/eventManager.js"></script>
    <script src="script.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Test inizializzazione iniziato');
            
            // Test 1: Verifica caricamento classi
            const classTest = document.getElementById('classTest');
            const classes = [
                'TimeManager', 'ContractManager', 'ProductionManager', 
                'UIManager', 'AnalysisManager', 'DataManager', 
                'SettingsManager', 'EventManager', 'PrintingCapacityApp'
            ];
            
            let classResults = '';
            classes.forEach(className => {
                const exists = window[className] !== undefined;
                classResults += `<div class="${exists ? 'success' : 'error'}">${className}: ${exists ? '‚úÖ Caricata' : '‚ùå Mancante'}</div>`;
            });
            classTest.innerHTML = classResults;
            
            // Test 2: Inizializzazione app
            const appTest = document.getElementById('appTest');
            let app = null;
            
            try {
                app = new PrintingCapacityApp();
                appTest.innerHTML = '<div class="success">‚úÖ App inizializzata con successo</div>';
                console.log('‚úÖ App:', app);
            } catch (error) {
                appTest.innerHTML = `<div class="error">‚ùå Errore inizializzazione: ${error.message}</div>`;
                console.error('‚ùå Errore:', error);
            }
            
            // Test 3: Verifica manager
            const managerTest = document.getElementById('managerTest');
            if (app) {
                const managers = [
                    'timeManager', 'contractManager', 'productionManager',
                    'uiManager', 'analysisManager', 'dataManager',
                    'settingsManager', 'eventManager'
                ];
                
                let managerResults = '';
                managers.forEach(managerName => {
                    const exists = app[managerName] !== undefined;
                    managerResults += `<div class="${exists ? 'success' : 'error'}">${managerName}: ${exists ? '‚úÖ Presente' : '‚ùå Mancante'}</div>`;
                });
                managerTest.innerHTML = managerResults;
            } else {
                managerTest.innerHTML = '<div class="error">‚ùå App non inizializzata</div>';
            }
            
            // Test 4: Event binding
            const buttonTest = document.getElementById('buttonTest');
            const testButton = document.getElementById('testButton');
            
            if (testButton) {
                testButton.addEventListener('click', () => {
                    buttonTest.innerHTML = '<div class="success">‚úÖ Event binding funziona</div>';
                });
                buttonTest.innerHTML = '<div class="warning">‚ö†Ô∏è Clicca il pulsante per testare</div>';
            } else {
                buttonTest.innerHTML = '<div class="error">‚ùå Pulsante non trovato</div>';
            }
            
            // Rendi app disponibile globalmente
            window.testApp = app;
        });
    </script>
</body>
</html>
